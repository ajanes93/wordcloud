var F=Object.defineProperty,I=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(o,e,t)=>e in o?F(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,w=(o,e)=>{for(var t in e||(e={}))P.call(e,t)&&x(o,t,e[t]);if($)for(var t of $(e))j.call(e,t)&&x(o,t,e[t]);return o},T=(o,e)=>I(o,O(e));var z=(o,e,t)=>(x(o,typeof e!="symbol"?e+"":e,t),t);import{d as m,o as c,c as u,a as i,n as S,b as A,e as V,r as g,f,g as L,w as q,v as D,h as E,u as _,i as y,j as p,t as d,m as H,k as K,l as b,s as U,p as W,q as v,x as G,F as J,S as Q,y as X,z as Y}from"./vendor.83257e2f.js";function Pe(){import("data:text/javascript,")}const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};Z();const ee={class:"flex items-center justify-center"},te=m({props:{size:{default:16}},setup(o){const e=o;return(t,r)=>(c(),u("div",ee,[i("div",{"data-testid":"spinner",class:S(`w-${e.size} h-${e.size} border-b-2 border-gray-900 rounded-full animate-spin`)},null,2)]))}});class se{constructor(){z(this,"client",A.create({baseURL:"https://gist.githubusercontent.com/grahamscott/65b43572ad18c5fbdd87/raw/d755523d6a281695e3b882db8c115ff37fc070fa/topics.json",timeout:6e4,withCredentials:!1}))}async fetchTopicsList(){try{const{data:e}=await this.client.get("/"),{topics:t}=e;return t}catch(e){throw e}}}const oe=new se,ne=V({id:"topics",state:()=>({topics:[],volumeRanges:[],maxRangeItems:6,negativeThreshold:40,positiveThreshold:60}),actions:{async fetchTopicsList(){try{const o=await oe.fetchTopicsList();this.topics=o.sort((e,t)=>t.volume-e.volume),this.$patch(e=>{const t=o.map(s=>s.volume).sort((s,n)=>s-n),r=[];for(let s=e.maxRangeItems;s>0;s--)r.push(t.splice(0,Math.ceil(t.length/s)));e.volumeRanges=r.map(s=>[Math.min(...s),Math.max(...s)])})}catch(o){throw o}}},getters:{topicsFormatted(){return this.topics.map(o=>{const{volume:e,sentimentScore:t}=o,r=this.volumeRanges.findIndex(([a,l])=>e>=a&&e<=l);let s=1,n;return r>0&&(s=r+.4),t>this.positiveThreshold?n="green":t<this.negativeThreshold?n="red":n="gray",T(w({},o),{color:n,size:s})})}}}),re=m({props:{color:null},setup(o){const e=o;return(t,r)=>(c(),u("div",{"data-testid":"alert",class:S(`bg-${e.color}-100 border border-${e.color}-400 text-${e.color}-700 px-4 py-3 rounded relative text-center`),role:"alert"},[g(t.$slots,"default")],2))}});var ie=(o,e)=>{const t=o.__vccOpts||o;for(const[r,s]of e)t[r]=s;return t};const ae={},ce={class:"flex flex-wrap justify-center items-end"};function le(o,e){return c(),u("ul",ce,[g(o.$slots,"default")])}var de=ie(ae,[["render",le]]);const ue={class:"bg-gray-100 p-3 rounded-md shadow-xl"},pe=m({setup(o){const e=f(!1),t=f({mouseenter:()=>e.value=!0,mouseleave:()=>e.value=!1}),r=f(null),s=L(()=>{if(!r.value)return{};const n=r.value.getBoundingClientRect(),a=n.x>window.innerWidth/2,l=n.y>window.innerHeight/2;return{right:a?0:void 0,left:a?void 0:0,bottom:l?"100%":void 0}});return(n,a)=>(c(),u("div",{ref_key:"menu",ref:r,class:"relative"},[g(n.$slots,"activator",{on:t.value}),q(i("div",{class:"absolute z-10",style:E(_(s))},[i("div",ue,[g(n.$slots,"menu")])],4),[[D,e.value]])],512))}}),me={class:"flex text-center"},he={"data-testid":"menu"},_e={class:"text-sm whitespace-nowrap font-bold"},fe={class:"my-3"},ve={class:"mb-3 font-medium text-sm"},ge={class:"mt-1 text-sm"},xe=b(" Positive Mentions: "),ye={class:"text-green-600 font-bold"},be={class:"mt-1 text-sm"},$e=b(" Neutral Mentions: "),we={class:"text-gray-600 font-bold"},Te={class:"mt-1 text-sm"},ze=b(" Negative Mentions: "),Se={class:"text-red-600 font-bold"},Le=m({props:{id:null,label:null,size:null,color:null,volume:null,sentiment:null},setup(o){const e=o,t=L(()=>{var r,s,n,a,l,h;return{positive:(s=(r=e.sentiment)==null?void 0:r.positive)!=null?s:0,neutral:(a=(n=e.sentiment)==null?void 0:n.neutral)!=null?a:0,negative:(h=(l=e.sentiment)==null?void 0:l.negative)!=null?h:0}});return(r,s)=>(c(),u("li",me,[y(pe,null,{activator:p(({on:n})=>[i("div",H({"data-testid":"label",class:`text-${e.color}-600 hover:text-${e.color}-400 cursor-pointer`,style:`font-size: ${o.size}em`},K(n)),d(e.label),17)]),menu:p(()=>[i("div",he,[i("h1",_e,'Information on topic "'+d(e.label)+'"',1),i("ul",fe,[i("li",ve,"Total Mentions: "+d(e.volume),1),i("li",ge,[xe,i("span",ye,d(_(t).positive),1)]),i("li",be,[$e,i("span",we,d(_(t).neutral),1)]),i("li",Te,[ze,i("span",Se,d(_(t).negative),1)])])])]),_:1})]))}}),ke={class:"text-sm font-bold"},Me=m({async setup(o){let e,t;const r=ne(),{topicsFormatted:s}=U(r),n=f();try{[e,t]=W(()=>r.fetchTopicsList()),await e,t()}catch(a){console.error(a),n.value="An unexpected error occurred!"}return(a,l)=>n.value?(c(),v(re,{key:0,color:"red"},{default:p(()=>[i("strong",ke,d(n.value),1)]),_:1})):(c(),v(de,{key:1},{default:p(()=>[(c(!0),u(J,null,G(_(s),({id:h,label:M,size:R,color:N,volume:C,sentiment:B})=>(c(),v(Le,{id:h,key:h,class:"mt-4 mr-2",label:M,color:N,size:R,volume:C,sentiment:B},null,8,["id","label","color","size","volume","sentiment"]))),128))]),_:1}))}}),Re={class:"flex h-screen",style:{"font-size":"10px"}},Ne={class:"max-w-screen-lg m-auto leading-none"},Ce=i("h1",{style:{"font-size":"5em"},class:"font-light text-center text-gray-700"}," My Topics Challenge ",-1),Be=i("hr",{class:"my-6"},null,-1),Fe={class:"pt-0 pb-12 px-12"},Ie=m({setup(o){return(e,t)=>(c(),u("div",Re,[i("div",Ne,[Ce,Be,(c(),v(Q,null,{fallback:p(()=>[y(te)]),default:p(()=>[i("div",Fe,[y(Me)])]),_:1}))])]))}});const k=X(Ie);k.use(Y());k.mount("#app");export{Pe as __vite_legacy_guard};
